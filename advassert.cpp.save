#include <stdio.h>

#include <stdarg.h>
#include <assert.h>

enum class AdvAssertType
{
    INT         = 0,
    CHAR        = 1,
    DOUBLE      = 2,
    FLOAT       = 3,
    STRING      = 4,
    LONG_INT    = 5,
    LONG_DOUBLE = 6,
    //POINTER     = 7,
};

void advassert_(int condition, int nArgs,...);

#define ADV_ASSERT(COND, ...)  advassert_(COND, __VA_ARGS__); assert(COND)

int main() // временно для тестов
{
    ADV_ASSERT(1 && "!!!aaa", 1, AdvAssertType::INT, 19);
    return 0;
}

void advassert_(int condition, int nArgs,...)
{
    if (!condition)
    {
        nArgs*=2; // потому что передается не фактическое количество аргументов, а сколько нужно вывести

        va_list args;
        va_start(args, nArgs);

        printf("!!!ADV_ASSERT!!!\n");

        if (nArgs == 0) fprintf(stderr, "No arguments to print.\n");
        //else printf("")

        for (int n = nArgs; n > 0; n-=2)
        {
            AdvAssertType = va_arg(args, AdvAssertType);
            switch(type)
            {
                case AdvAssertType::INT:
                    fprintf(stderr, "%d\n", va_arg(args, int));
                    break;
                case AdvAssertType::CHAR:
                    fprintf(stderr, "%d\n", va_arg(args, char));
                    break;
                case AdvAssertType::DOUBLE:
                    fprintf(stderr, "%d\n", va_arg(args, double));
                    break;
                case AdvAssertType::FLOAT:
                    fprintf(stderr, "%d\n", va_arg(args, float));
                    break;
                case AdvAssertType::STRING:
                    fprintf(stderr, "%d\n", va_arg(args, string));
                    break;
                case AdvAssertType::LONG_INT:
                    fprintf(stderr, "%d\n", va_arg(args, long int));
                    break;
                case AdvAssertType::LONG_DOUBLE:
                    fprintf(stderr, "%d\n", va_arg(args, long double));
                    break;
                //case POINTER:
                //    fprintf(stderr, "%d\n", va_arg(args, int));
                //    break;
                default:
                    printf("ADV_ASSERT: Unknown AdvAssertType. Can't read arguments...\n");
                    break;

            }
        }

        va_end(args);
    }
}
